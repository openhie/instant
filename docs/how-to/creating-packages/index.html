<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/instant/blog/rss.xml" title="Instant OpenHIE Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/instant/blog/atom.xml" title="Instant OpenHIE Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Instant OpenHIE" href="/instant/opensearch.xml"><title data-react-helmet="true">How to create an Instant OpenHIE package | Instant OpenHIE</title><meta data-react-helmet="true" property="og:url" content="https://openhie.github.io/instant/docs/how-to/creating-packages"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="How to create an Instant OpenHIE package | Instant OpenHIE"><meta data-react-helmet="true" name="description" content="How to create an Instant OpenHIE package"><meta data-react-helmet="true" property="og:description" content="How to create an Instant OpenHIE package"><meta data-react-helmet="true" name="keywords" content="Instant OpenHIE,How to,Creating packages"><link data-react-helmet="true" rel="shortcut icon" href="/instant/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://openhie.github.io/instant/docs/how-to/creating-packages"><link data-react-helmet="true" rel="alternate" href="https://openhie.github.io/instant/docs/how-to/creating-packages" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://openhie.github.io/instant/docs/how-to/creating-packages" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/instant/assets/css/styles.418955fb.css">
<link rel="preload" href="/instant/assets/js/runtime~main.017a3597.js" as="script">
<link rel="preload" href="/instant/assets/js/main.bc5f98cf.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/instant/"><img src="/instant/img/IOHIE-icon-medium.png" alt="Instant OpenHIE Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/instant/img/IOHIE-icon-medium.png" alt="Instant OpenHIE Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Instant OpenHIE</strong></a><a class="navbar__item navbar__link" href="/instant/docs/introduction/vision">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/openhie/instant" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/instant/"><img src="/instant/img/IOHIE-icon-medium.png" alt="Instant OpenHIE Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/instant/img/IOHIE-icon-medium.png" alt="Instant OpenHIE Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Instant OpenHIE</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/instant/docs/introduction/vision">Docs</a></li><li class="menu__list-item"><a href="https://github.com/openhie/instant" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/instant/docs/introduction/vision">Vision</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/instant/docs/introduction/getting-started">Getting started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/instant/docs/introduction/community">Community</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/instant/docs/concepts/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/instant/docs/concepts/package-arch">Packages</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">How-to</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/instant/docs/how-to/setup-instant-with-gocli">Setup instant with GO CLI</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/instant/docs/how-to/creating-packages">Create packages</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/instant/docs/how-to/setup-kubernetes-in-cloud">Setup managed Kubernetes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/instant/docs/how-to/configure-openhim-mapping-mediator">Configure OpenHIM Mapping Mediator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/instant/docs/how-to/configure-dhis2">Configure HMIS (DHIS2)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/instant/docs/how-to/setup-instant-on-windows-wsl">Setup instant on Windows</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Existing Packages</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/instant/docs/packages/core">Core</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/instant/docs/packages/elastic">Elastic analytics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/instant/docs/packages/emr">EMR Package</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/instant/docs/packages/facility">Facility-Registry</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/instant/docs/packages/hmis">Health Management Information System</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/instant/docs/packages/health-worker">Health-Worker-Registry</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/instant/docs/packages/health-workforce">Health-Workforce</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Use Case Packages</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/instant/docs/use-case-packages/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/instant/docs/use-case-packages/covid19-immunization">Covid19-Immunization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/instant/docs/use-case-packages/covid19-surveillance">Covid19-Surveillance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/instant/docs/use-case-packages/hiv-case-reporting">HIV Case Reporting</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">More Information</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/instant/docs/more-info/architecture">Architecture</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">How to create an Instant OpenHIE package</h1></header><div class="markdown"><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>The Instant OpenHIE architecture, codebase, and documentation are under active development and are subject to change. While we encourage adoption and extension of the Instant OpenHIE framework, we do not consider this ready for production use at this stage.</p></div></div><p>Packages are a way of allowing a group of applications to be setup and configured to enable a particular set of functionality. Each package <strong>MUST</strong> include the following:</p><ol><li><code>docker-compose.*.yml</code> files to setup and configure the necessary applications in Docker Compose</li><li>Deployment and service resource files (and any other necessary resource files) to setup and configure the necessary applications in Kubernetes</li><li>A <code>instant.json</code> file that holds metadata about the package</li><li>Bash scripts that accept a particular set of commands (init, up, down, and destroy) and execute these Docker Compose and Kubernetes infrastructure files and any other necessary processing and configuration to perform the required command.</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="docker-compose-files"></a>Docker Compose files<a class="hash-link" href="#docker-compose-files" title="Direct link to heading">#</a></h2><p>All Docker Compose files should by convention be contained in a <code>./docker</code> directory in the root of the package directory. It is often useful to split up Docker Compose files into separate files with different purposes. For example:</p><ul><li><code>docker-compose.yml</code> for the main application setup and orchestration</li><li><code>docker-compose.config.yml</code> for starting short lived containers that configure the applications or add any test data that is necessary</li><li><code>docker-compose.dev.yml</code> for over-ridding options in the main compose file to allow for easier development. For example, to expose all ports to the host even those that should be protected</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="kubernetes-resources"></a>Kubernetes resources<a class="hash-link" href="#kubernetes-resources" title="Direct link to heading">#</a></h2><p>All Kubernetes files should by convention be contained in a <code>./kubernetes</code> directory in the root of the package directory. It is recommended to use the <a href="https://kubernetes.io/docs/tasks/manage-kubernetes-objects/declarative-config/" target="_blank" rel="noopener noreferrer">declarative form</a> of Kubernetes resources. The key resources to define are deployments and services for each component.</p><p>Config containers can be executed as job resources with an <a href="https://kubernetes.io/docs/concepts/workloads/pods/init-containers/" target="_blank" rel="noopener noreferrer">init container</a>. These temporary containers only configure the main application once the service has started up.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="instantjson"></a>instant.json<a class="hash-link" href="#instantjson" title="Direct link to heading">#</a></h2><p>This file should be in the root directory of the package and provide metadata about the package itself along with any dependencies:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;id&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;abc&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;name&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;XYZ&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;description&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;...&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;type&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;use-case&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// options: infrastructure | use-case</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;version&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;v0.0.1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;dependencies&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;core&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;healthworkforce&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// list of package ids</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;environmentVariables&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// List of environment variables used in the package</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">ï¿¼   </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;NODE_ENV&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;instant&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token property" style="color:rgb(128, 203, 196)">&quot;url&quot;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;http://test.org&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="bash-scripts"></a>Bash scripts<a class="hash-link" href="#bash-scripts" title="Direct link to heading">#</a></h2><p>Two bash scripts are required in each package:</p><ul><li><code>./docker/compose.sh</code> - to configure, start and stop the applications using Docker Compose</li><li><code>./kubernetes/main/k8s.sh</code> - to configure, start and stop the applications using Kubernetes</li></ul><p>Each of these scripts should accept one of the following commands (i.e. <code>./compose.sh &lt;command&gt;</code>):</p><ul><li><code>init</code> - start all the applications in this package and performs any necessary pre-processing of the infrastructure files</li><li><code>up</code> - start all the applications in this package</li><li><code>down</code> - stop all the applications in this package</li><li><code>destroy</code> - delete all the application containers in this package and all their stored data</li></ul><p>For example, a <code>compose.sh</code> script could look like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">composeFilePath=$( cd &quot;$(dirname &quot;${BASH_SOURCE[0]}&quot;)&quot; ; pwd -P )</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">if [ &quot;$1&quot; == &quot;init&quot; ]; then</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    # execute other setup scripts or commands here</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    # ...</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    docker-compose -f &quot;$composeFilePath&quot;/docker-compose.yml -f &quot;$composeFilePath&quot;/importer/docker-compose.config.yml up -d</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">elif [ &quot;$1&quot; == &quot;up&quot; ]; then</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    docker-compose -f &quot;$composeFilePath&quot;/docker-compose.yml -f &quot;$composeFilePath&quot;/importer/docker-compose.config.yml up -d</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">elif [ &quot;$1&quot; == &quot;down&quot; ]; then</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    docker-compose -f &quot;$composeFilePath&quot;/docker-compose.yml -f &quot;$composeFilePath&quot;/importer/docker-compose.config.yml stop</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">elif [ &quot;$1&quot; == &quot;destroy&quot; ]; then</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    docker-compose -f &quot;$composeFilePath&quot;/docker-compose.yml  -f &quot;$composeFilePath&quot;/importer/docker-compose.config.yml down -v</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">else</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    echo &quot;Valid options are: init, up, down, or destroy&quot;</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">fi</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>A <code>k8s.sh</code> script could look like this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">#!/bin/bash</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">k8sMainRootFilePath=$( cd &quot;$(dirname &quot;${BASH_SOURCE[0]}&quot;)&quot; ; pwd -P )</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">if [ &quot;$1&quot; == &quot;init&quot; ]; then</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    # execute other setup scripts or commands here</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    # ...</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    # Create the namespace</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    kubectl apply -f $k8sMainRootFilePath/healthworkforce-namespace.yaml</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    kubectl apply -k $k8sMainRootFilePath</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">elif [ &quot;$1&quot; == &quot;up&quot; ]; then</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    # Create the namespace</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    kubectl apply -f $k8sMainRootFilePath/healthworkforce-namespace.yaml</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    kubectl apply -k $k8sMainRootFilePath</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">elif [ &quot;$1&quot; == &quot;down&quot; ]; then</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    kubectl delete deployment mapper-deployment</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">elif [ &quot;$1&quot; == &quot;destroy&quot; ]; then</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    kubectl delete namespaces hwf-package</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">else</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    echo &quot;Valid options are: up, down, or destroy&quot;</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">fi</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The Instant OpenHIE executable will look for these scripts and ensure that they are executed to start-up a package. Packages will be started in their dependency order beginning with the <code>core</code> package.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-to-execute-your-new-package"></a>How to execute your new package<a class="hash-link" href="#how-to-execute-your-new-package" title="Direct link to heading">#</a></h2><p>The following mechanism for adding a package is useful for package development.</p><blockquote><p>The preferred method for adding custom packages to your Instant instance will be to add the package repo GitHub url to the config - however this <strong>feature is still in development</strong>.</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="yarn-dev"></a>Yarn (Dev)<a class="hash-link" href="#yarn-dev" title="Direct link to heading">#</a></h3><p>Copy your package into the root directory of this Instant OpenHIE project.</p><p>Run as normal:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">yarn docker:instant init &lt;your_package_name&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="docker-or-kubernetes-without-the-instant-openhie-repo"></a>Docker or Kubernetes without the Instant OpenHIE repo<a class="hash-link" href="#docker-or-kubernetes-without-the-instant-openhie-repo" title="Direct link to heading">#</a></h3><p>The Instant OpenHIE project is available as a Docker image therefore we do not need the whole GitHub repository to run the containers.</p><p>For a minimum Instant OpenHIE set up, download <a href="https://raw.githubusercontent.com/openhie/instant/master/deploy.sh" target="_blank" rel="noopener noreferrer">this deploy script from GitHub</a>.
Once downloaded make sure it&#x27;s executable: <code>sudo chmod +x deploy.sh</code></p><p>Then, run the following command to add your custom package and initialise the system in docker.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">./deploy init -t docker core &lt;your_package_ids&gt; -c=&quot;../path/to/your/package&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>To remove the instant project, run the following:</p><p>./deploy destroy -t docker core covid19surveillance</p><blockquote><p>The custom package location is not needed for <code>up</code>, <code>down</code>, or <code>destroy</code> commands on an existing system.</p></blockquote><p>To initialise kubernetes, run the following:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">./deploy init -t k8s core &lt;your_package_ids&gt; -c=&quot;../path/to/your/package&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Multiple custom packages can be chained together as follows:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">./deploy init test1 test2 test3 -c=&quot;../test1&quot; -c=&quot;../test2&quot; -c=&quot;../test3&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="docker"></a>Docker<a class="hash-link" href="#docker" title="Direct link to heading">#</a></h3><p>To add a custom package to your instant instance, use the following flag</p><ul><li><code>-c</code></li><li><code>--custom-package</code></li></ul><blockquote><p>We hope to support package url references soon</p></blockquote><p>To add multiple custom packages, list each package location with the flag.</p><p><code>-c=&quot;/path/to/package_1&quot; -c=&quot;/path/to/package_2&quot;</code></p><p>Below is an example of an entire <code>init</code> command.
If you had downloaded the <a href="https://github.com/jembi/who-covid19-surveillance-package" target="_blank" rel="noopener noreferrer">who-covid19-surveillance-package</a> repository onto your machine you could reference it as follows:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">yarn docker:instant init core covid19surveillance -c=&quot;../who-covid19-surveillance-package&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Once a custom package has been added to the project, it does not need to be referenced in future commands as the data has been persisted in the shared volume.
The examples below continue on from the previous covid19 package initialisation.</p><ul><li><code>yarn docker:instant down core covid19surveillance</code></li><li><code>yarn docker:instant up core covid19surveillance</code></li><li><code>yarn docker:instant test core covid19surveillance</code></li><li><code>yarn docker:instant destroy core covid19surveillance</code></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="kubernetes"></a>Kubernetes<a class="hash-link" href="#kubernetes" title="Direct link to heading">#</a></h3><p>To add a custom package to your instant instance, use the following flag</p><ul><li><code>-c</code></li><li><code>--custom-package</code></li></ul><blockquote><p>We hope to support package url references soon</p></blockquote><p>To add multiple custom packages, list each package location with the flag.</p><p><code>-c=&quot;/path/to/package_1&quot; -c=&quot;/path/to/package_2&quot;</code></p><p>Docker is the default deploy environment. To use Kubernetes, add the target flag <code>-t</code>. For example:</p><ul><li><code>-t k8s</code></li><li><code>-t kubernetes</code></li></ul><p>Below is an example of an entire <code>init</code> command.
If you had downloaded the <a href="https://github.com/jembi/who-covid19-surveillance-package" target="_blank" rel="noopener noreferrer">who-covid19-surveillance-package</a> repository onto your machine you could reference it as follows:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><div tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">yarn docker:instant init -t k8s core covid19surveillance -c=&quot;../who-covid19-surveillance-package&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Once a custom package has been added to the project, it does not need to be references in future commands as the data has been persisted in the shared volume.
The examples below continue on from the previous covid19 package initialisation.</p><ul><li><code>yarn docker:instant down -t k8s core covid19surveillance</code></li><li><code>yarn docker:instant up -t k8s core covid19surveillance</code></li><li><code>yarn docker:instant test -t k8s core covid19surveillance</code></li><li><code>yarn docker:instant destroy -t k8s core covid19surveillance</code></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/openhie/instant/tree/master/docs/docs/how-to/creating-packages.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/instant/docs/how-to/setup-instant-with-gocli"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« How to setup Instant OpenHIE on any platform using the GO CLI</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/instant/docs/how-to/setup-kubernetes-in-cloud"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">How to setup managed Kubernetes in the cloud Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#docker-compose-files" class="table-of-contents__link">Docker Compose files</a></li><li><a href="#kubernetes-resources" class="table-of-contents__link">Kubernetes resources</a></li><li><a href="#instantjson" class="table-of-contents__link">instant.json</a></li><li><a href="#bash-scripts" class="table-of-contents__link">Bash scripts</a></li><li><a href="#how-to-execute-your-new-package" class="table-of-contents__link">How to execute your new package</a><ul><li><a href="#yarn-dev" class="table-of-contents__link">Yarn (Dev)</a></li><li><a href="#docker-or-kubernetes-without-the-instant-openhie-repo" class="table-of-contents__link">Docker or Kubernetes without the Instant OpenHIE repo</a></li><li><a href="#docker" class="table-of-contents__link">Docker</a></li><li><a href="#kubernetes" class="table-of-contents__link">Kubernetes</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://ohie.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">OpenHIE</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons Licence" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png"></a><br>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</div></div></div></footer></div>
<script src="/instant/assets/js/runtime~main.017a3597.js"></script>
<script src="/instant/assets/js/main.bc5f98cf.js"></script>
</body>
</html>