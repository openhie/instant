<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus">


<title data-react-helmet="true">Core Package</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"><meta data-react-helmet="true" property="og:title" content="InstantHIE · Simplifying OpenHIE Setup"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="description" content="The core package of the InstantHIE"><meta data-react-helmet="true" property="og:description" content="The core package of the InstantHIE"><meta data-react-helmet="true" property="og:url" content="https://openhie.github.io/instant/docs/packages/core">

<link data-react-helmet="true" rel="shortcut icon" href="/instant/img/favicon.ico">


<link rel="stylesheet" href="/instant/styles.66d75069.css">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}function e(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}var n=window.matchMedia("(prefers-color-scheme: dark)");n.addListener((function(n){null===e()&&t(n.matches?"dark":"")}));var a=e();null!==a?t(a):n.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/instant/"><img class="navbar__logo" src="/instant/img/logo.svg" alt="My Site Logo"><strong>InstantHIE</strong></a><a class="navbar__item navbar__link" href="/instant/docs/introduction/overview">Docs</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://github.com/openhie/instant">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/instant/"><img class="navbar__logo" src="/instant/img/logo.svg" alt="My Site Logo"><strong>InstantHIE</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/instant/docs/introduction/overview">Docs</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://github.com/openhie/instant">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/instant/docs/introduction/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/instant/docs/introduction/vision">Vision</a></li><li class="menu__list-item"><a class="menu__link" href="/instant/docs/introduction/getting-started">Getting started</a></li><li class="menu__list-item"><a class="menu__link" href="/instant/docs/introduction/community">Community</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/instant/docs/concepts/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/instant/docs/concepts/package-arch">Packages</a></li><li class="menu__list-item"><a class="menu__link" href="/instant/docs/concepts/creating-packages">Creating packages</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Packages</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/instant/docs/packages/core">Core</a></li><li class="menu__list-item"><a class="menu__link" href="/instant/docs/packages/health-workforce">Health-Workforce</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Core Package</h1></header><div class="markdown"><p>The InstantHIE Core Package is the base of the InstantHIE architecture.</p><p>This package consists of two components:</p><ul><li>Interoperability Layer - <a href="http://openhim.org/">OpenHIM</a></li><li>FHIR Server - <a href="https://hapifhir.io/">HAPI FHIR</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="getting-started"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#getting-started" title="Direct link to heading">#</a>Getting Started</h2><p>Select a deployment platform below to follow the getting started steps in setting up this package.</p><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tab-item tabItem_3zTA tab-item--active">Docker Compose</li><li role="tab" tabindex="0" aria-selected="false" class="tab-item tabItem_3zTA">Kubernetes</li></ul><div role="tabpanel" class="margin-vert--md"><div><p>Before we proceed with creating our Core package components, we need to ensure we are in the correct directory containing our <code>docker-compose</code> script.</p><p>Once you are in the correct working directory (<code>core/docker/</code>) we can proceed to execute our <code>docker-compose</code> script by running the below command which will create all the services and print out their logs in the terminal.</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-bash codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">docker-compose up</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="useful-compose-flags"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#useful-compose-flags" title="Direct link to heading">#</a>Useful compose flags</h4><p>Some additional flags can be passed to the <code>docker-compose</code> command making it a bit easier to work with.</p><ul><li><code>-d</code>: Run the services in a detached mode. This means that when you close or exit your terminal, the services will still be running in the background.</li><li><code>-f</code>: Specify the location of the <code>docker-compose</code> file to be executed. Omitting this flag will look for the default <code>docker-compose.yml</code> file.</li><li><code>--force-recreate</code>: This will force the container/image to be re-created if a newer version is found. This is useful when a new image has been released but not yet pulled onto the host machine.</li></ul><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-bash codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">docker-compose up -d --force-recreate</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="environment-configuration"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#environment-configuration" title="Direct link to heading">#</a>Environment configuration</h4><p>By running the above command to get started with the Core package we create all the services that need to be defined, but this script might have some limitations depending on the type of environment you want to run the configuration</p><p>Additional <code>docker-compose</code> files are available for extra environment configuration</p><ul><li><strong>docker-compose.yml</strong>: Main <code>docker-compose</code> script to create the services</li><li><strong>docker-compose.dev.yml</strong>: Development <code>docker-compose</code> script to override some of the default configuration to be used in a development environment (Open service ports for access etc)</li></ul><p>The below command specifies the three <code>docker-compose</code> files that need to be executed for the development configuration</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-bash codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">docker-compose -f docker-compose.yml -f docker-compose.dev.yml -f docker-compose.config.yml up -d</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>The below command specifies the two <code>docker-compose</code> files that need to be executed for a production-like configuration</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-bash codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">docker-compose -f docker-compose.yml -f docker-compose.config.yml up -d</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="accessing-the-services"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#accessing-the-services" title="Direct link to heading">#</a>Accessing the services</h2><ul><li><strong>OpenHIM</strong><ul><li>Console: <a href="http://localhost:9000">http://localhost:9000</a></li><li>Username: <strong>root@openhim.org</strong></li><li>Password: <strong>instant101</strong></li></ul></li><li><strong>HAPI FHIR</strong><ul><li>This service should not be publicly accessible and only accessed via the Interoperability Layer</li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="testing-the-core-package"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#testing-the-core-package" title="Direct link to heading">#</a>Testing the Core package</h2><p>As part of the Core package setup we also do some initial importation of config for connecting the services together.</p><ul><li>OpenHIM: Import a public channel configuration that routes requests to the HAPI FHIR services</li><li>HAPI FHIR: <em>Not config import yet</em></li></ul><p>For testing this Core package we will be making use of <code>curl</code> for sending our request, but any client could be used to achieve the same result.</p><p>Execute the below <code>curl</code> request to successfully route a request through the OpenHIM to query the HAPI FHIR server.</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-bash codeBlock_19pQ" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> http://localhost:5001/hapi-fhir-jpaserver/fhir/Patient</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/packages/core.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/instant/docs/concepts/creating-packages"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« How to create an Instant OpenHIE package</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/instant/docs/packages/health-workforce"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">Health-Workforce »</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#getting-started" class="contents__link">Getting Started</a></li><li><a href="#accessing-the-services" class="contents__link">Accessing the services</a></li><li><a href="#testing-the-core-package" class="contents__link">Testing the Core package</a></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://ohie.org/">OpenHIE</a></li></ul></div></div><div class="text--center">Copyright © 2020 OpenHIE</div></div></footer>
</div>

<script src="/instant/styles.e3751dc3.js"></script>

<script src="/instant/runtime~main.4a217648.js"></script>

<script src="/instant/main.837db7f6.js"></script>

<script src="/instant/1.25af8f01.js"></script>

<script src="/instant/18.2a7f48a1.js"></script>

<script src="/instant/c90a2472.376b19fa.js"></script>

<script src="/instant/17896441.868e3c5b.js"></script>

<script src="/instant/8f900f9a.0a8242bb.js"></script>


</body>
</html>